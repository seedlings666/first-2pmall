!function(e,t){function s(t,s){var o,n,a,l,c=this,d=e(window),h=e(t);if(o=h.find(".nav-list"),n=o.get(0)){var u=ace.helper.getAttrSettings(t,e.fn.ace_sidebar_scroll.defaults);this.settings=e.extend({},e.fn.ace_sidebar_scroll.defaults,s,u);var f=c.settings.scroll_to_active,p=h.ace_sidebar("ref");h.attr("data-sidebar-scroll","true");var _=null,v=null,g=null,b=null,w=null,m=null;this.is_scrolling=!1;var y=!1;this.sidebar_fixed=r(t,"fixed");var x,C,T=function(){var e=o.parent().offset();return c.sidebar_fixed&&(e.top-=ace.helper.scrollTop()),d.innerHeight()-e.top-(c.settings.include_toggle?0:a.outerHeight())+1},z=function(){return n.clientHeight},H=function(t){if(!y&&c.sidebar_fixed&&(o=h.find(".nav-list"),a=h.find(".sidebar-toggle").eq(0),l=h.find(".sidebar-shortcuts").eq(0),n=o.get(0))){o.wrap('<div class="nav-wrap-up pos-rel" />'),o.after("<div><div></div></div>"),o.wrap('<div class="nav-wrap" />'),c.settings.include_toggle||a.css({"z-index":1}),c.settings.include_shortcuts||l.css({"z-index":99}),_=o.parent().next().ace_scroll({size:T(),mouseWheelLock:!0,hoverReset:!1,dragEvent:!0,styleClass:c.settings.scroll_style,touchDrag:!1}).closest(".ace-scroll").addClass("nav-scroll"),m=_.data("ace_scroll"),v=_.find(".scroll-content").eq(0),g=v.find(" > div").eq(0),w=e(m.get_track()),b=w.find(".scroll-bar").eq(0),c.settings.include_shortcuts&&0!=l.length&&(o.parent().prepend(l).wrapInner("<div />"),o=o.parent()),c.settings.include_toggle&&0!=a.length&&(o.append(a),o.closest(".nav-wrap").addClass("nav-wrap-t")),o.css({position:"relative"}),1==c.settings.scroll_outside&&_.addClass("scrollout"),n=o.get(0),n.style.top=0,v.on("scroll.nav",function(){n.style.top=-1*this.scrollTop+"px"}),o.on(e.event.special.mousewheel?"mousewheel.ace_scroll":"mousewheel.ace_scroll DOMMouseScroll.ace_scroll",function(e){return c.is_scrolling&&m.is_active()?_.trigger(e):!c.settings.lock_anyway}),o.on("mouseenter.ace_scroll",function(){w.addClass("scroll-hover")}).on("mouseleave.ace_scroll",function(){w.removeClass("scroll-hover")});var s=v.get(0);if(o.on("ace_drag.nav",function(t){if(!c.is_scrolling||!m.is_active())return void(t.retval.cancel=!0);if(0!=e(t.target).closest(".can-scroll").length)return void(t.retval.cancel=!0);if("up"==t.direction||"down"==t.direction){m.move_bar(!0);var i=t.dy;i=parseInt(Math.min(x,i)),Math.abs(i)>2&&(i=2*i),0!=i&&(s.scrollTop=s.scrollTop+i,n.style.top=-1*s.scrollTop+"px")}}),c.settings.smooth_scroll&&o.on("touchstart.nav MSPointerDown.nav pointerdown.nav",function(e){o.css("transition-property","none"),b.css("transition-property","none")}).on("touchend.nav touchcancel.nav MSPointerUp.nav MSPointerCancel.nav pointerup.nav pointercancel.nav",function(e){o.css("transition-property","top"),b.css("transition-property","top")}),i&&!c.settings.include_toggle){var r=a.get(0);r&&v.on("scroll.safari",function(){ace.helper.redraw(r)})}if(y=!0,1==t&&(c.reset(),f&&c.scroll_to_active(),f=!1),"number"==typeof c.settings.smooth_scroll&&c.settings.smooth_scroll>0&&(o.css({"transition-property":"top","transition-duration":(c.settings.smooth_scroll/1e3).toFixed(2)+"s"}),b.css({"transition-property":"top","transition-duration":(c.settings.smooth_scroll/1500).toFixed(2)+"s"}),_.on("drag.start",function(e){e.stopPropagation(),o.css("transition-property","none")}).on("drag.end",function(e){e.stopPropagation(),o.css("transition-property","top")})),ace.vars.android){var d=ace.helper.scrollTop();d<2&&(window.scrollTo(d,0),setTimeout(function(){c.reset()},20));var u,p=ace.helper.winHeight();e(window).on("scroll.ace_scroll",function(){c.is_scrolling&&m.is_active()&&(u=ace.helper.winHeight(),u!=p&&(p=u,c.reset()))})}}};this.scroll_to_active=function(){if(m&&m.is_active())try{var e,t=p.vars(),s=h.find(".nav-list");t.minimized&&!t.collapsible?e=s.find("> .active"):(e=o.find("> .active.hover"),0==e.length&&(e=o.find(".active:not(.open)")));var i=e.outerHeight();s=s.get(0);for(var r=e.get(0);r!=s;)i+=r.offsetTop,r=r.parentNode;var a=i-_.height();a>0&&(n.style.top=-a+"px",v.scrollTop(a))}catch(l){}},this.reset=function(e){if(e===!0&&(this.sidebar_fixed=r(t,"fixed")),!this.sidebar_fixed)return void this.disable();y||H();var s=p.vars(),i=!s.collapsible&&!s.horizontal&&(x=T())<(C=n.clientHeight);this.is_scrolling=!0,i&&(g.css({height:C,width:8}),_.prev().css({"max-height":x}),m.update({size:x}),m.enable(),m.reset()),i&&m.is_active()?h.addClass("sidebar-scroll"):this.is_scrolling&&this.disable()},this.disable=function(){this.is_scrolling=!1,_&&(_.css({height:"","max-height":""}),g.css({height:"",width:""}),_.prev().css({"max-height":""}),m.disable()),parseInt(n.style.top)<0&&c.settings.smooth_scroll&&e.support.transition.end?o.one(e.support.transition.end,function(){h.removeClass("sidebar-scroll"),o.off(".trans")}):h.removeClass("sidebar-scroll"),n.style.top=0},this.prehide=function(e){if(this.is_scrolling&&!p.get("minimized"))if(z()+e<T())this.disable();else if(e<0){var t=v.scrollTop()+e;if(t<0)return;n.style.top=-1*t+"px"}},this._reset=function(e){e===!0&&(this.sidebar_fixed=r(t,"fixed")),ace.vars.webkit?setTimeout(function(){c.reset()},0):this.reset()},this.set_hover=function(){w&&w.addClass("scroll-hover")},this.get=function(e){if(this.hasOwnProperty(e))return this[e]},this.set=function(e,t){this.hasOwnProperty(e)&&(this[e]=t)},this.ref=function(){return this},this.updateStyle=function(e){null!=m&&m.update({styleClass:e})},h.on("hidden.ace.submenu.sidebar_scroll shown.ace.submenu.sidebar_scroll",".submenu",function(e){e.stopPropagation(),p.get("minimized")||(c._reset(),"shown"==e.type&&c.set_hover())}),H(!0)}}var i=ace.vars.safari&&navigator.userAgent.match(/version\/[1-5]/i),r="getComputedStyle"in window?function(e,t){return e.offsetHeight,window.getComputedStyle(e).position==t}:function(t,s){return t.offsetHeight,e(t).css("position")==s};e(document).on("settings.ace.sidebar_scroll",function(t,s,i){e(".sidebar[data-sidebar-scroll=true]").each(function(){var t=e(this),i=t.ace_sidebar_scroll("ref");if("sidebar_collapsed"==s&&r(this,"fixed"))"true"==t.attr("data-sidebar-hover")&&t.ace_sidebar_hover("reset"),i._reset();else if("sidebar_fixed"===s||"navbar_fixed"===s){var o=i.get("is_scrolling"),n=r(this,"fixed");i.set("sidebar_fixed",n),n&&!o?i._reset():n||i.disable()}})}),e(window).on("resize.ace.sidebar_scroll",function(){e(".sidebar[data-sidebar-scroll=true]").each(function(){var t=e(this);"true"==t.attr("data-sidebar-hover")&&t.ace_sidebar_hover("reset");var s=e(this).ace_sidebar_scroll("ref"),i=r(this,"fixed");s.set("sidebar_fixed",i),s._reset()})}),e.fn.ace_sidebar_scroll||(e.fn.ace_sidebar_scroll=function(i,r){var o,n=this.each(function(){var t=e(this),n=t.data("ace_sidebar_scroll"),a="object"==typeof i&&i;n||t.data("ace_sidebar_scroll",n=new s(this,a)),"string"==typeof i&&"function"==typeof n[i]&&(o=n[i](r))});return o===t?n:o},e.fn.ace_sidebar_scroll.defaults={scroll_to_active:!0,include_shortcuts:!0,include_toggle:!1,smooth_scroll:150,scroll_outside:!1,scroll_style:"",lock_anyway:!1})}(window.jQuery);